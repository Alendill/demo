#!/bin/bash

# 获取符合条件的命名空间列表
NAMESPACE_LIST=$(kubectl get ns | grep <条件> | awk '{print $1}')

# 设置输出文件路径
OUTPUT_FILE="secrets_exported.yaml"

# 循环遍历每个命名空间
for NAMESPACE in ${NAMESPACE_LIST}; do
  # 获取符合条件的Secret列表
  SECRET_LIST=$(kubectl get secrets --namespace=${NAMESPACE} --selector=your_label_selector -o json)

  # 将Secret列表追加到文件
  echo "${SECRET_LIST}" >> ${OUTPUT_FILE}

  echo "Secrets exported from namespace ${NAMESPACE}"
done

echo "All secrets exported to ${OUTPUT_FILE}"